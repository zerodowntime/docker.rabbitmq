#loopback_users.guest = false
default_user = {{ getv "/rabbitmq/default/user" "guest" }}
default_pass = {{ getv "/rabbitmq/default/pass" "guest" }}

loopback_users = none
total_memory_available_override_value = {{ getv "/memory/limit/in/bytes" "0"}} 
listeners.tcp.default = 5672
hipe_compile = false
vm_memory_high_watermark.relative = 0.66
disk_free_limit.relative = 1.5
default_vhost = dummy

{{ if exists "/rabbitmq/peer/discovery/backend" }}
  {{ if eq (getv "/rabbitmq/peer/discovery/backend") "rabbit_peer_discovery_k8s" }}

cluster_formation.peer_discovery_backend  = {{ getv "/rabbitmq/peer/discovery/backend" }}
cluster_formation.k8s.host = {{ getv "/rabbitmq/k8s/host" "kubernetes.default.svc.cluster.local" }}
cluster_formation.k8s.address_type = {{ getv "/rabbitmq/k8s/address_type" "hostname" }}
cluster_formation.k8s.port = {{ getv "/rabbitmq/k8s/port" "443" }}
cluster_formation.k8s.scheme = {{ getv "/rabbitmq/k8s/scheme" "https" }}
cluster_formation.k8s.service_name = {{ getv "/rabbitmq/k8s/service/name" }}
cluster_formation.node_cleanup.interval = 60

cluster_formation.node_cleanup.only_log_warning = true
#cluster_partition_handling = pause_miniority

  {{ end }}
{{ end }}
